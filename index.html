<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Device Information</title>
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <h1>Device Information</h1>
    <div id="deviceInfo" class="info">
        <p>Loading device information...</p>
    </div>

    <button id="delete" class="button-input" onclick="getLocation()">Geolocation</button>
      <p id="geolocation"></p>

    <div class="disclaimer">
        <p><strong>Disclaimer:</strong> This tool displays information about your device collected using JavaScript APIs available in your browser. No data is sent to any server. Ensure you are comfortable before sharing such details with anyone.</p>
    </div>

    <script>
    // Function to gather and display device information
    function getDeviceInfo(battery) {
        const deviceInfo = {
            browser: navigator.userAgent,
            platform: navigator.platform,
            language: navigator.language,
            onlineStatus: navigator.onLine ? "Online" : "Offline",
            screenResolution: `${screen.width} x ${screen.height}`,
            colorDepth: `${screen.colorDepth}-bit`,
            cookiesEnabled: navigator.cookieEnabled ? "Enabled" : "Disabled",
            javaEnabled: navigator.javaEnabled() ? "Enabled" : "Disabled",
            memory: navigator.deviceMemory || "Unknown",
            charging: battery.charging,
            chargingTime: battery.chargingTime ? `${battery.chargingTime} seconds` : "N/A",
            dischargingTime: battery.dischargingTime ? `${battery.dischargingTime} seconds` : "N/A",
            batteryLevel: `${(battery.level * 100).toFixed(2)}%`,
        };

        const infoDiv = document.getElementById("deviceInfo");
        infoDiv.innerHTML = `
            <h3>Detected Device Information:</h3>
            <ul>
                <li><strong>Browser/User Agent:</strong> ${deviceInfo.browser}</li>
                <li><strong>Platform:</strong> ${deviceInfo.platform}</li>
                <li><strong>Language:</strong> ${deviceInfo.language}</li>
                <li><strong>Online Status:</strong> ${deviceInfo.onlineStatus}</li>
                <li><strong>Screen Resolution:</strong> ${deviceInfo.screenResolution}</li>
                <li><strong>Color Depth:</strong> ${deviceInfo.colorDepth}</li>
                <li><strong>Cookies Enabled:</strong> ${deviceInfo.cookiesEnabled}</li>
                <li><strong>Java Enabled:</strong> ${deviceInfo.javaEnabled}</li>
                <li><strong>Approx. memory:</strong> ${deviceInfo.memory} GB</li>
                <li><strong>Is charging:</strong> ${deviceInfo.charging}</li>
                <li><strong>Approx. time until full:</strong> ${deviceInfo.chargingTime}</li>
                <li><strong>Approx. time until empty:</strong> ${deviceInfo.dischargingTime}</li>
                <li><strong>Battery Level:</strong> ${deviceInfo.batteryLevel}</li>
            </ul>
        `;
    }

    // Function to handle Geolocation
    function getLocation() {
        const delElement = document.getElementById("getLocationBtn");
        delElement.remove();

        const locationDiv = document.getElementById("geolocation");
        if (navigator.geolocation) {
            locationDiv.innerHTML = "Getting your location...";
            navigator.geolocation.getCurrentPosition(showPosition, showError);
        } else {
            locationDiv.innerHTML = "Geolocation is not supported by this browser.";
        }
    }

    function showPosition(position) {
        const { latitude, longitude, accuracy } = position.coords;
        document.getElementById("geolocation").innerHTML = `
            <ul>
                <li><strong>Latitude:</strong> ${latitude.toFixed(5)}</li>
                <li><strong>Longitude:</strong> ${longitude.toFixed(5)}</li>
                <li><strong>Accuracy:</strong> ${accuracy.toFixed(2)} meters</li>
            </ul>
            <a id="map-link" href="https://www.google.com/maps?q=${latitude},${longitude}" target="_blank">View on Google Maps</a>
        `;
    }

    function showError(error) {
        const locationDiv = document.getElementById("geolocation");
        switch (error.code) {
            case error.PERMISSION_DENIED:
                locationDiv.innerHTML = "User denied the request for Geolocation.";
                break;
            case error.POSITION_UNAVAILABLE:
                locationDiv.innerHTML = "Location information is unavailable.";
                break;
            case error.TIMEOUT:
                locationDiv.innerHTML = "The request to get user location timed out.";
                break;
            default:
                locationDiv.innerHTML = `An unexpected error occurred (Code: ${error.code}).`;
                break;
        }
    }

    // Initialize and get battery info
    window.onload = () => {
        navigator.getBattery().then(battery => {
            getDeviceInfo(battery);
        });
    };
</script>

</body>
</html>
